---
title: 'Deploy to Railway'
description: 'One-click deployment to Railway with PostgreSQL included'
icon: 'train'
---

# Deploy to Railway

Deploy WhatsApp Team Inbox to Railway in minutes with built-in PostgreSQL and automatic HTTPS.

## TL;DR - Quick Deploy

<Steps>
  <Step title="Fork & Connect">
    Fork the repo → [Railway](https://railway.app) → New Project → GitHub → Select repo
  </Step>
  <Step title="Add Services">
    Add PostgreSQL database, then deploy backend (`/backend`) and frontend (`/web`)
  </Step>
  <Step title="Set Variables">
    Add WhatsApp credentials, JWT secrets, and database URL to backend
  </Step>
  <Step title="Deploy">
    Railway auto-deploys with HTTPS URLs. Done! ✅
  </Step>
</Steps>

**Total time:** ~10 minutes | **Cost:** $5-20/month

---

## Why Railway?

<CardGroup cols={2}>
  <Card title="One-Click Deploy" icon="rocket">
    Deploy from GitHub with zero configuration
  </Card>
  <Card title="Included Database" icon="database">
    PostgreSQL database included in deployment
  </Card>
  <Card title="Auto HTTPS" icon="lock">
    Automatic SSL certificates and domains
  </Card>
  <Card title="Affordable" icon="dollar-sign">
    Starts at $5/month with free trial
  </Card>
</CardGroup>

## Prerequisites

<Check>GitHub account</Check>
<Check>Railway account (sign up at railway.app)</Check>
<Check>WhatsApp Business API credentials</Check>
<Check>GitHub repository with your code</Check>

## Quick Deploy

### Option 1: Deploy Button (Fastest)

Click the button below to deploy instantly:

[![Deploy on Railway](https://railway.app/button.svg)](https://railway.app/template/whatsapp-inbox)

This will:
- Create a new project
- Set up PostgreSQL database
- Deploy backend and frontend
- Generate automatic HTTPS URLs

### Option 2: Manual Deployment

<Steps>
  <Step title="Fork the Repository">
    1. Go to the [WhatsApp Team Inbox repository](https://github.com/your-org/whatsapp-team-inbox)
    2. Click **Fork** in the top right
    3. Create a fork in your account
  </Step>

  <Step title="Create Railway Project">
    1. Log in to [Railway](https://railway.app)
    2. Click **New Project**
    3. Select **Deploy from GitHub repo**
    4. Authorize Railway to access your GitHub
    5. Select your forked repository
  </Step>

  <Step title="Add PostgreSQL Database">
    1. Click **+ New** in your project
    2. Select **Database** → **PostgreSQL**
    3. Railway will provision a database automatically
  </Step>

  <Step title="Configure Backend Service">
    1. Click **+ New** → **GitHub Repo**
    2. Select your repository
    3. Set **Root Directory**: `backend`
    4. Railway will detect `Dockerfile` automatically
  </Step>

  <Step title="Configure Frontend Service">
    1. Click **+ New** → **GitHub Repo**
    2. Select your repository again
    3. Set **Root Directory**: `web`
    4. Railway will detect Next.js automatically
  </Step>
</Steps>

## Environment Variables

After deployment, configure environment variables for each service.

### Backend Environment Variables

In Railway dashboard, go to Backend service → **Variables** tab:

<AccordionGroup>
  <Accordion title="Database (Auto-configured)">
    ```bash
    # Railway automatically provides:
    DATABASE_URL=${{Postgres.DATABASE_URL}}
    ```
  </Accordion>

  <Accordion title="WhatsApp API (Required)">
    ```bash
    WHATSAPP_API_URL=https://graph.facebook.com/v21.0
    WHATSAPP_ACCESS_TOKEN=your_permanent_access_token
    WHATSAPP_PHONE_NUMBER_ID=123456789012345
    WHATSAPP_BUSINESS_ACCOUNT_ID=123456789012345
    WHATSAPP_WEBHOOK_VERIFY_TOKEN=generate_random_token
    ```

    Get these from [Meta Business Suite](/deployment/whatsapp-setup)
  </Accordion>

  <Accordion title="Security (Required)">
    ```bash
    JWT_SECRET=generate_with_openssl_rand_hex_32
    JWT_REFRESH_SECRET=generate_different_secret
    JWT_EXPIRES_IN=7d
    JWT_REFRESH_EXPIRES_IN=30d
    ```

    Generate secrets:
    ```bash
    openssl rand -hex 32
    ```
  </Accordion>

  <Accordion title="Admin User (Required)">
    ```bash
    ADMIN_EMAIL=admin@yourcompany.com
    ADMIN_PASSWORD=strong_password_here
    ADMIN_FIRST_NAME=System
    ADMIN_LAST_NAME=Administrator
    ```
  </Accordion>

  <Accordion title="Application URLs (Auto-configured)">
    ```bash
    # Use Railway's automatic URLs
    CORS_ORIGIN=${{Frontend.RAILWAY_PUBLIC_DOMAIN}}
    NODE_ENV=production
    PORT=4000
    WS_PORT=4001
    ```
  </Accordion>

  <Accordion title="Optional: Email (SMTP)">
    ```bash
    SMTP_HOST=smtp.sendgrid.net
    SMTP_PORT=587
    SMTP_USER=apikey
    SMTP_PASSWORD=your_sendgrid_api_key
    SMTP_FROM=noreply@yourdomain.com
    ```
  </Accordion>

  <Accordion title="Optional: Push Notifications">
    ```bash
    # Generate with: npx web-push generate-vapid-keys
    VAPID_PUBLIC_KEY=your_public_key
    VAPID_PRIVATE_KEY=your_private_key
    VAPID_SUBJECT=mailto:admin@yourdomain.com
    ```
  </Accordion>
</AccordionGroup>

### Frontend Environment Variables

In Railway dashboard, go to Frontend service → **Variables** tab:

```bash
# Backend API URL (use Railway's service reference)
NEXT_PUBLIC_API_BASE_URL=https://${{Backend.RAILWAY_PUBLIC_DOMAIN}}
NEXT_PUBLIC_WS_URL=wss://${{Backend.RAILWAY_PUBLIC_DOMAIN}}
```

<Info>
Railway automatically replaces `${{ServiceName.VARIABLE}}` with actual values
</Info>

## Custom Domain (Optional)

### Add Custom Domain

<Steps>
  <Step title="Access Settings">
    Click on your service → **Settings** tab
  </Step>

  <Step title="Add Domain">
    Under **Domains**, click **+ Generate Domain** for a Railway subdomain,
    or **+ Custom Domain** for your own domain
  </Step>

  <Step title="Configure DNS">
    For custom domains, add DNS records:

    **A Record:**
    ```
    Type: CNAME
    Name: app (or @ for root domain)
    Value: <your-railway-domain>.up.railway.app
    ```
  </Step>

  <Step title="Update Environment Variables">
    Update CORS and frontend URLs to use your custom domain:
    ```bash
    # Backend
    CORS_ORIGIN=https://your-domain.com

    # Frontend
    NEXT_PUBLIC_API_BASE_URL=https://api.your-domain.com
    ```
  </Step>
</Steps>

## Database Management

### Access Database

<Steps>
  <Step title="Get Database URL">
    Click on PostgreSQL service → **Connect** tab → Copy `DATABASE_URL`
  </Step>

  <Step title="Connect via CLI">
    ```bash
    # Install PostgreSQL client
    brew install postgresql  # macOS
    sudo apt install postgresql-client  # Ubuntu

    # Connect to database
    psql "your-database-url-here"
    ```
  </Step>

  <Step title="Run Migrations">
    ```bash
    # In backend service terminal
    railway run npm run migrate:deploy
    ```
  </Step>
</Steps>

### Database Backups

Railway automatically creates daily backups. To restore:

1. Go to PostgreSQL service → **Backups** tab
2. Select a backup
3. Click **Restore**

## Webhook Configuration

After deployment, configure WhatsApp webhook:

<Steps>
  <Step title="Get Backend URL">
    Copy your backend service URL from Railway dashboard
  </Step>

  <Step title="Configure in Meta Business Suite">
    Set webhook URL to:
    ```
    https://your-backend-url.railway.app/api/webhook
    ```

    Use `WHATSAPP_WEBHOOK_VERIFY_TOKEN` from your environment variables
  </Step>

  <Step title="Test Webhook">
    Send a test message to your WhatsApp number and check backend logs:
    ```bash
    # In Railway dashboard
    Backend service → Logs tab
    ```
  </Step>
</Steps>

## Monitoring & Logs

### View Logs

<Steps>
  <Step title="Access Service Logs">
    Click on any service → **Deployments** tab → Click latest deployment
  </Step>

  <Step title="Real-time Logs">
    Logs auto-refresh in real-time. Filter by:
    - Error level
    - Timestamp
    - Search terms
  </Step>

  <Step title="Download Logs">
    Click **Download** to save logs for analysis
  </Step>
</Steps>

### Metrics & Usage

Railway provides built-in metrics:

- **CPU Usage** - Monitor backend processing
- **Memory** - Track memory consumption
- **Network** - Monitor incoming/outgoing traffic
- **Database Size** - Track PostgreSQL storage

Access in: Service → **Metrics** tab

## Scaling

### Vertical Scaling

Railway automatically scales resources based on usage:

<CardGroup cols={2}>
  <Card title="Starter Plan" icon="seedling">
    - $5/month
    - 512MB RAM
    - Shared CPU
    - 1GB database
  </Card>
  <Card title="Pro Plan" icon="rocket">
    - $20/month
    - 8GB RAM
    - Dedicated CPU
    - 10GB database
  </Card>
</CardGroup>

### Horizontal Scaling

For high traffic:

1. Go to service → **Settings**
2. Enable **High Availability**
3. Set number of replicas
4. Railway will load balance automatically

## Deployment Triggers

### Auto-Deploy on Push

Railway automatically deploys when you push to your GitHub repository:

```bash
git add .
git commit -m "Update feature"
git push origin main
# Railway detects push and deploys automatically
```

### Manual Deployment

Trigger manual deployment:

1. Go to service → **Deployments**
2. Click **Deploy**
3. Select branch to deploy

### Deploy Specific Branch

1. Service → **Settings**
2. Under **Source**, change **Deploy Branch**
3. Select branch (main, develop, staging, etc.)

## Cost Optimization

### Minimize Costs

<AccordionGroup>
  <Accordion title="Use Resource Limits">
    Set resource limits to prevent unexpected costs:

    Service → **Settings** → **Resources**
    - CPU limit: 1 vCPU
    - Memory limit: 512MB
  </Accordion>

  <Accordion title="Enable Sleep Mode">
    For development environments:

    Service → **Settings** → Enable **Sleep on Idle**

    Services sleep after 1 hour of inactivity
  </Accordion>

  <Accordion title="Optimize Database">
    - Regular vacuum operations
    - Remove unused indexes
    - Archive old conversations
    - Monitor storage growth
  </Accordion>

  <Accordion title="Use Hobby Plan for Testing">
    Free $5 credit monthly for hobby projects

    Upgrade to Developer plan only when needed
  </Accordion>
</AccordionGroup>

## Troubleshooting

<AccordionGroup>
  <Accordion title="Build Failed">
    **Common causes:**
    - Missing dependencies in package.json
    - Build errors in code
    - Node version mismatch

    **Solutions:**
    1. Check build logs in Deployments tab
    2. Verify package.json scripts
    3. Set Node version in Settings → Environment
  </Accordion>

  <Accordion title="Database Connection Failed">
    **Causes:**
    - DATABASE_URL not set correctly
    - Database service not running

    **Solutions:**
    1. Verify DATABASE_URL in Variables tab
    2. Check PostgreSQL service status
    3. Restart backend service
  </Accordion>

  <Accordion title="Frontend Can't Connect to Backend">
    **Causes:**
    - NEXT_PUBLIC_API_BASE_URL incorrect
    - CORS not configured

    **Solutions:**
    1. Verify NEXT_PUBLIC_API_BASE_URL uses HTTPS
    2. Check CORS_ORIGIN in backend includes frontend URL
    3. Review backend logs for CORS errors
  </Accordion>

  <Accordion title="Webhook Not Receiving Messages">
    **Causes:**
    - Webhook URL not accessible
    - Verify token mismatch

    **Solutions:**
    1. Test webhook URL: `curl https://your-backend/api/webhook`
    2. Verify WHATSAPP_WEBHOOK_VERIFY_TOKEN matches Meta
    3. Check backend logs for incoming webhook requests
  </Accordion>
</AccordionGroup>

## Production Checklist

Before going live:

<Check>All environment variables configured</Check>
<Check>Database migrations applied</Check>
<Check>Admin user created</Check>
<Check>WhatsApp webhook configured and tested</Check>
<Check>Custom domain configured (optional)</Check>
<Check>HTTPS enabled</Check>
<Check>Email service configured</Check>
<Check>Push notifications set up</Check>
<Check>Backups enabled</Check>
<Check>Monitoring alerts configured</Check>

## Railway CLI (Advanced)

For advanced users, use Railway CLI:

### Install CLI

```bash
# macOS/Linux
curl -fsSL https://railway.app/install.sh | sh

# Windows
powershell -c "irm railway.app/install.ps1 | iex"
```

### Deploy from CLI

```bash
# Login
railway login

# Link project
railway link

# Deploy
railway up

# View logs
railway logs

# Run migrations
railway run npm run migrate:deploy
```

## Migration from Other Platforms

### From Heroku

<Steps>
  <Step title="Export Heroku Config">
    ```bash
    heroku config -a your-app-name > .env
    ```
  </Step>

  <Step title="Import to Railway">
    Copy environment variables from .env to Railway Variables tab
  </Step>

  <Step title="Migrate Database">
    ```bash
    # Dump Heroku database
    heroku pg:backups:capture -a your-app-name
    heroku pg:backups:download -a your-app-name

    # Restore to Railway
    railway run psql $DATABASE_URL < latest.dump
    ```
  </Step>
</Steps>

### From DigitalOcean

<Steps>
  <Step title="Export Database">
    ```bash
    pg_dump your_db > backup.sql
    ```
  </Step>

  <Step title="Import to Railway">
    ```bash
    railway run psql $DATABASE_URL < backup.sql
    ```
  </Step>

  <Step title="Update Environment Variables">
    Copy all environment variables to Railway
  </Step>
</Steps>

## Next Steps

<CardGroup cols={2}>
  <Card title="WhatsApp Setup" icon="whatsapp" href="/deployment/whatsapp-setup">
    Configure WhatsApp Business API
  </Card>
  <Card title="Environment Variables" icon="gear" href="/deployment/environment-variables">
    Complete environment variable reference
  </Card>
  <Card title="Going Live" icon="globe" href="/deployment/going-live">
    Production deployment checklist
  </Card>
  <Card title="Monitoring" icon="chart-line" href="/admin/monitoring">
    Set up monitoring and alerts
  </Card>
</CardGroup>

## Resources

- [Railway Documentation](https://docs.railway.app)
- [Railway Discord Community](https://discord.gg/railway)
- [Railway Status Page](https://status.railway.app)
- [Railway Pricing](https://railway.app/pricing)
